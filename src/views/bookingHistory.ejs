<!-- booking-history.ejs -->
<!DOCTYPE html>
<html>
<head>
    <title>University Booking Systeme</title>
    <meta content="" name="description">
    <meta content="" name="keywords">
    <link href="/img/icon.png" rel="icon">
    <link rel="stylesheet" href="../routes/booking.js">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="./sidebar.ejs" >
    <link rel="stylesheet" href="../models/halls.js">
    <link rel="stylesheet" href="../models/Bookings.js">
    <link rel="stylesheet" href="../models/resource.js">
</head>
<body>
    <div class="wrapper table-sm table-responsive-sm ml-0 ">
        <%- include('sidebar') %>
        <div class="main p-3 table-responsive">
        <h1 class="text-center">Historique des r√©servations</h1>
        
        <table class="table table-sm table-striped">
            <thead class="thead-dark">
                <tr>
                    <th scope="col">Booking ID</th>
                    <th scope="col">Hall</th>
                    <th scope="col">Start date</th>
                    <th scope="col">End date</th>
                    <th scope="col">Attendees</th>
                    <th scope="col">Purpose</th>
                    <th scope="col">status</th>
                    <th scope="col">Resource</th>
                </tr>
            </thead>
            <tbody>
                <% bookings.forEach(booking => { %>
                    <tr>
                        <td><%= booking.id %></td>
                        <td><%= booking.hall.name %></td>
                        <td><%= booking.start_date.toLocaleDateString('en-us', { weekday:"long", year:"numeric", month:"short", day:"numeric" , hour :'numeric' , minute : 'numeric'}) %></td>
                        <td><%= booking.end_date.toLocaleDateString('en-us', { weekday:"long", year:"numeric", month:"short", day:"numeric" , hour :'numeric' , minute : 'numeric'}) %></td>
                        <td><%= booking.expected_attendees %></td>
                        <td><%= booking.purpose %></td>
                        <td><%= booking.status %></td>
                        <td>
                            <% booking.booking_resources.forEach(bookingResource => { %>
                                <%= bookingResource.resource.name  %>      
                               <% }) %>
                           <% }); %>
                        </td>
                        
                    </tr>
            </tbody>
        </table>
    </div>
    </div>
   
</body>
</html>
